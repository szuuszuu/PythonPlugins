/JOB
//NAME CLEAN-R1_LONG
///FOLDERNAME IMPORTANT_JOBS
//POS
///NPOS 38,38,0,4,0,0
///TOOL 0
///POSTYPE PULSE
///PULSE
C00000=1847,99151,107892,-1853,-15455,4961
C00001=-120230,125018,77843,-317,41702,-82617
C00002=-139871,129798,73313,-17783,92238,-57407
C00003=-143854,149220,100804,-21636,95641,-50676
C00004=-143854,149220,100804,-21636,95641,-50676
C00005=-139600,134017,86236,-31595,94593,-50163
C00006=-143745,148068,102249,-21583,94287,-50392
C00007=-143849,148185,103080,-21556,93839,-50345
C00008=-143881,148566,102859,-21567,94142,-50412
C00009=-126968,113458,81541,-71661,86651,-45110
C00010=-129516,114001,87094,-71564,83840,-44032
C00011=-130226,114831,89666,-71602,82957,-43610
C00012=-130554,115539,91221,-71634,82529,-43389
C00013=-129326,113209,85847,-71553,84093,-44169
C00014=-130463,115335,90778,-71625,82649,-43451
C00015=-130796,115307,89955,-71552,82589,-43706
C00016=-129326,113209,85847,-71553,84093,-44169
C00017=-130463,115335,90778,-71625,82649,-43451
C00018=-130518,111415,85548,-71506,83024,-43985
C00019=-129326,113209,85847,-71553,84093,-44169
C00020=-129326,113209,85847,-71553,84093,-44169
C00021=-142029,141599,84923,-29320,101576,-50675
C00022=-145320,141359,88297,-21007,99579,-51926
C00023=-145284,140380,89931,-20902,98179,-51668
C00024=-160702,25116,-48212,-22202,118839,-60741
C00025=-145216,138630,90421,-20838,97068,-51447
C00026=-145216,137983,91160,-20794,96329,-51318
C00027=-160702,25116,-48212,-22202,118839,-60741
C00028=-145216,138630,90421,-20838,97068,-51447
C00029=-145284,140380,89931,-20902,98179,-51668
C00030=-145144,141525,88530,-21020,99568,-51862
C00031=-146315,140234,86898,-21599,98700,-52091
C00032=-146291,137647,89532,-21420,95951,-51587
C00033=-146272,139580,89169,-21488,97094,-51786
C00034=-142049,129545,74904,-31706,97687,-51975
C00035=-142527,106566,37454,-8611,86472,-74911
C00036=-140182,133546,73697,-22021,105474,-51216
C00037=-120438,117866,68142,-99,43995,-82721
///LIMIT ON
BC00000=-79639
///LIMIT OFF
BC00001=1083
BC00002=1160
BC00003=1083
BC00004=1083
BC00005=1083
BC00006=1083
BC00007=1083
BC00008=1083
BC00009=1083
BC00010=1083
BC00011=1083
BC00012=1083
BC00013=1083
BC00014=1083
BC00015=1083
BC00016=1083
BC00017=1083
BC00018=1083
BC00019=1083
BC00020=1083
BC00021=2372
BC00022=1083
BC00023=1083
BC00024=1083
BC00025=1083
BC00026=1083
BC00027=1083
BC00028=1083
BC00029=1083
BC00030=1083
BC00031=1083
BC00032=1083
BC00033=1083
BC00034=1083
BC00035=1083
BC00036=1083
BC00037=1665
///POSTYPE BASE
///RECTAN
///RCONF 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
P00128=-884.361,4485.973,1204.369,-0.2486,-48.5139,-179.7756
P00129=-893.368,4496.974,1214.559,-0.2482,-48.5290,-179.7739
P00130=-887.000,4497.028,1202.539,-0.2479,-48.5435,-179.7748
P00131=-684.782,622.014,-267.020,-60.9466,37.0130,164.4655
//INST
///DATE 2024/06/03 17:29
///ATTR SC,RW
///GROUP1 RB1,BS1
///LVARS 0,5,3,1,0,3,3,0
NOP
DOUT OT#(58) OFF
SET B050 0
SFTOF
'********************************
'Please check position before
'running in play-mode
'********************************
'#Output - Cleaning Motor
SET LI000 14
'#Output - Cleaning Oil
SET LI001 15
'#Output - Wirecut
SET LI002 16
'#Output - Wirefeeder Forward
SET LI003 4095
'#Output - Torch Blow out
SET LI004 4091
'********************************
REFP 1 C00000 BC00000
GETS LPX001 $PX011
CNVRT LPX001 LPX001 RF
GETS LPX002 $PX001
CNVRT LPX002 LPX002 RF
SUB LBP002 LBP001
'Comment out axis to shift
SETE LBP002 (1) 0
SETE LBP002 (2) 0
SETE LBP002 (3) 0
SFTON LBP002
'********************************
'SAFE POS
COMM PAUSE IF IN#(1563)=OFF
SFTOF
MOVJ C00001 BC00001 VJ=100.00
MOVJ C00002 BC00002 VJ=100.00
'WIRECUT
MOVJ C00003 BC00003 VJ=100.00
*BEGIN
MOVL C00004 BC00004 V=250.0
'WIREFEED OUTPUT
MOVL C00005 BC00005 V=333.3 PL=0
DOUT OT#(4095) ON
TIMER T=1.20
DOUT OT#(4095) OFF
MOVL C00006 BC00006 V=75.0 PL=0
WAIT IN#(4095)=OFF
'CUT POSITION
MOVL C00007 BC00007 V=20.0 PL=0
TIMER T=0.50
DOUT OT#(LI002) ON
TIMER T=0.20
MOVL C00008 BC00008 V=1500.0
DOUT OT#(LI002) OFF
MOVL C00009 BC00009 V=1500.0
'CHECK
*CHECK
INC B050
MOVL C00010 BC00010 V=1500.0 PL=0 DEC=20
MOVL C00011 BC00011 V=333.3 PL=0 DEC=20
MOVL C00012 BC00012 V=8.3 SRCH RIN#(1)=ON DIS=10.0
GETS PX0131 $PX001
COMM SET P0130 P0131
SUB P0131 P0130
GETE LD000 P0131 (1)
GETE LD002 P0131 (3)
MUL LD000 LD000
MUL LD002 LD002
ADD LD000 LD002
SET LR000 LD000
DIV LR000  1.000000E+06
SQRT LR000 LR000
SET R085 LR000
IFTHENEXP LR000> 5.000000E-01
	 MOVL C00013 BC00013 V=1500.0 DEC=20
	 JUMP *BEGIN IF B050<=2
	 CALL JOB:CLEAN-R1_LONG_CUT IF B050=3
	 JUMP *CHECK IF B050=4
	 IFTHENEXP B050>3
		 SETUALM 8201 "PROBLEM DL DRUTU" 0
		 JUMP *BEGIN
	 ENDIF
ENDIF
MOVL C00014 BC00014 V=333.3 PL=0 DEC=20
MOVL C00015 BC00015 V=8.3 SRCH RIN#(1)=ON DIS=20.0
GETS PX0131 $PX001
COMM SET P0129 P0131
SUB P0131 P0129
GETE LD000 P0131 (1)
GETE LD002 P0131 (3)
MUL LD000 LD000
MUL LD002 LD002
ADD LD000 LD002
SET LR000 LD000
DIV LR000  1.000000E+06
SQRT LR000 LR000
SET R086 LR000
IFTHENEXP LR000> 1.000000E+00
	 MOVL C00016 BC00016 V=333.3 DEC=20
	 JUMP *BEGIN IF B050<=2
	 CALL JOB:CLEAN-R1_LONG_CUT IF B050=3
	 JUMP *CHECK IF B050=4
	 IFTHENEXP B050>3
		 SETUALM 8201 "PROBLEM DL DRUTU" 0
		 SET B050 0
		 JUMP *BEGIN
	 ENDIF
ENDIF
MOVL C00017 BC00017 V=333.3 PL=0 DEC=20
MOVL C00018 BC00018 V=8.3 SRCH RIN#(1)=ON DIS=20.0
GETS PX0131 $PX001
COMM SET P0128 P0131
SUB P0131 P0128
GETE LD000 P0131 (2)
GETE LD002 P0131 (3)
MUL LD000 LD000
MUL LD002 LD002
ADD LD000 LD002
SET LR000 LD000
DIV LR000  1.000000E+06
SQRT LR000 LR000
SET R087 LR000
MOVL C00019 BC00019 V=1500.0 DEC=20
IFTHENEXP LR000> 1.000000E+00
	 MOVL C00020 BC00020 V=1500.0 DEC=20
	 JUMP *BEGIN IF B050<=2
	 CALL JOB:CLEAN-R1_LONG_CUT IF B050=3
	 JUMP *CHECK IF B050=4
	 IFTHENEXP B050>2
		 SETUALM 8201 "PROBLEM DL DRUTU" 0
		 JUMP *BEGIN
	 ENDIF
ENDIF
SET B050 0
MOVL C00021 BC00021 V=1500.0 DEC=20
DOUT OT#(LI002) OFF
'CLEANING MOTOR
MOVJ C00022 BC00022 VJ=100.00 PL=0
MOVL C00023 BC00023 V=75.0 PL=0
'CLEANING AIR
DOUT OT#(LI004) ON
COMM MOVL C00024 BC00024 V=20.0 PL=0  //OLD POSITION
MOVL C00025 BC00025 V=50.0 PL=0
TIMER T=0.20
DOUT OT#(LI000) ON
TIMER T=0.50
MOVL C00026 BC00026 V=15.0 PL=0
TIMER T=0.50
COMM MOVL C00027 BC00027 V=20.0 PL=0  //OLD POSITION
TIMER T=0.50
MOVL C00028 BC00028 V=25.0
DOUT OT#(LI000) OFF
TIMER T=0.20
MOVL C00029 BC00029 V=66.7 PL=0
MOVL C00030 BC00030 V=1500.0
DOUT OT#(LI004) OFF
COMM 'CLEANING OIL
COMM MOVJ C00031 BC00031 VJ=100.00 PL=0
COMM MOVL C00032 BC00032 V=166.7
COMM PULSE OT#(LI001) T=0.50
COMM WAIT IN#(LI001)=OFF
COMM TIMER T=0.50
COMM MOVL C00033 BC00033 V=1500.0
COMM 'CLEANING AIR
COMM PULSE OT#(LI004) T=2.00
COMM TIMER T=1.00
COMM 'SAFE POS
COMM MOVL C00034 BC00034 V=1500.0
COMM MOVJ C00035 BC00035 VJ=100.00
MOVJ C00036 BC00036 VJ=100.00
MOVJ C00037 BC00037 VJ=100.00
SFTOF
END
